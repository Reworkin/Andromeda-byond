<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/machinery - Космическая Стацния 13</title></head><body><header><a href="index.html">Космическая Стацния 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/machinery.html#var">Var Details</a> - <a href="obj/machinery.html#proc">Proc Details</a></header><main><h1>machinery <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a></aside> <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L86"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 86"></a></h1><p>Машины в мире, такие как компьютеры, трубы и шлюзы.</p>
<p>Обзор:
Используется для создания объектов, которым требуется вызов процедуры на каждом шаге. Стандартное определение 'Initialize()'
сохраняет ссылку на машину src в глобальном списке 'machines list'. Стандартное определение
'Destroy' удаляет ссылку на машину src из глобального списка 'machines list'.</p>
<p>Переменные класса:
use_power (num)
текущее состояние автоматического использования энергии.
Возможные значения:
NO_POWER_USE -- нет автоматического использования энергии
IDLE_POWER_USE -- машина использует энергию на уровне холостого хода
ACTIVE_POWER_USE -- машина использует энергию на активном уровне</p>
<p>active_power_usage (num)
Значение количества энергии, используемой в активном режиме</p>
<p>idle_power_usage (num)
Значение количества энергии, используемой в режиме холостого хода</p>
<p>power_channel (num)
Из какого канала брать энергию при потреблении
Возможные значения:
AREA_USAGE_EQUIP:1 -- Канал оборудования
AREA_USAGE_LIGHT:2 -- Канал освещения
AREA_USAGE_ENVIRON:3 -- Канал окружения</p>
<p>component_parts (list)
Список составных частей машины, используется машинами на основе каркаса.</p>
<p>stat (bitflag)
Битовые флаги статуса машины.
Возможные битовые флаги:
BROKEN -- Машина сломана
NOPOWER -- К машине не поступает питание.
MAINT -- машина в данный момент находится на техобслуживании.
EMPED -- временно сломана импульсом ЭМИ</p>
<p>Процедуры класса:
Initialize()</p>
<p>Destroy()</p>
<pre><code>update_mode_power_usage()
	обновляет переменную static_power_usage этой машины и делает её статическое потребление энергии от зоны точным.
	вызывается после изменения потребления энергии в простое или активном режиме.

update_power_channel()
	обновляет переменную static_power_usage этой машины и делает её статическое потребление энергии от зоны точным.
	вызывается после изменения переменной power_channel или вызова для изменения самой переменной.

unset_static_power()
	полностью удаляет текущее статическое потребление энергии этой машины из её зоны.
	используется в других процедурах обновления питания для последующего добавления правильного потребления.


 Стандартное определение использует 'use_power', 'power_channel', 'active_power_usage',
 'idle_power_usage', 'powered()' и 'use_energy()' для реализации поведения.
</code></pre>
<p>powered(chan = -1)         'modules/power/power.dm'
Проверяет, имеет ли зона, содержащая объект, доступную энергию для канала питания, заданного в 'chan'. -1 по умолчанию означает power_channel</p>
<p>use_energy(amount, chan=-1)   'modules/power/power.dm'
Вычитает 'amount' из канала питания 'chan' зоны, содержащей объект.</p>
<p>power_change()               'modules/power/power.dm'
Вызывается зоной, содержащей объект, каждый раз, когда эта зона подвергается
изменению состояния питания (в зоне заканчивается энергия или канал зоны отключается).</p>
<p>RefreshParts()               'game/machinery/machine.dm'
Вызывается для обновления переменных в машине, которые зависят от частей,
содержащихся в списке component_parts. (пример: количество стекла и материалов для
автолата)</p>
<pre><code> Стандартное определение ничего не делает.
</code></pre>
<p>process()                  'game/machinery/machine.dm'
Вызывается 'подсистемой машин' один раз за тик машин для каждой машины, которая находится в её списке 'machines'.</p>
<p>process_atmos()
Вызывается 'подсистемой воздуха' один раз за атмосферный тик для каждой машины, которая находится в её списке 'atmos_machines'.
Compiled by Aygar</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/machinery.html#var/active_power_usage">active_power_usage</a></th><td>количество статической нагрузки, которое эта машина добавляет в список power_usage своей зоны, когда use_power = ACTIVE_POWER_USE</td></tr><tr><th><a href="obj/machinery.html#var/always_area_sensitive">always_area_sensitive</a></th><td>Хотим ли мы перехватывать on_enter_area и on_exit_area?
Отключает некоторые оптимизации</td></tr><tr><th><a href="obj/machinery.html#var/appearance_power_state">appearance_power_state</a></th><td>Каково было наше состояние питания в последний раз, когда мы обновляли внешний вид?
TRUE для включено, FALSE для выключено, -1 для &quot;никогда не проверялось&quot;</td></tr><tr><th><a href="obj/machinery.html#var/atmos_processing">atmos_processing</a></th><td>Находится ли эта машина в очереди атмосферного оборудования?</td></tr><tr><th><a href="obj/machinery.html#var/circuit">circuit</a></th><td>Схема, которая будет создана и вставлена при создании оборудования</td></tr><tr><th><a href="obj/machinery.html#var/component_parts">component_parts</a></th><td>список всех частей, использованных для сборки, если сделано из определённых типов каркасов.</td></tr><tr><th><a href="obj/machinery.html#var/critical_machine">critical_machine</a></th><td>Является ли эта машина критически важной для работы станции и должна ли зона быть освобождена от сбоев питания.</td></tr><tr><th><a href="obj/machinery.html#var/fair_market_price">fair_market_price</a></th><td>Используется при нарушении НАП, оплата штрафа</td></tr><tr><th><a href="obj/machinery.html#var/idle_power_usage">idle_power_usage</a></th><td>количество статической нагрузки, которое эта машина добавляет в список power_usage своей зоны, когда use_power = IDLE_POWER_USE</td></tr><tr><th><a href="obj/machinery.html#var/interaction_flags_machine">interaction_flags_machine</a></th><td>См. code/DEFINES/interaction_flags.dm</td></tr><tr><th><a href="obj/machinery.html#var/is_operational">is_operational</a></th><td>Комбинация факторов, таких как наличие питания, исправность и так далее. Булево значение.</td></tr><tr><th><a href="obj/machinery.html#var/last_used_time">last_used_time</a></th><td>world.time последнего использования <a href="mob/living.html" title="/mob/living">/mob/living</a></td></tr><tr><th><a href="obj/machinery.html#var/last_user_mobtype">last_user_mobtype</a></th><td>Тип моба последнего пользователя. Приведение типа к <a href="mob/living.html" title="/mob/living">/mob/living</a> для использования initial()</td></tr><tr><th><a href="obj/machinery.html#var/machine_stat">machine_stat</a></th><td>см. code/__DEFINES/stat.dm</td></tr><tr><th><a href="obj/machinery.html#var/occupant">occupant</a></th><td>Моб, запечатанный внутри машины</td></tr><tr><th><a href="obj/machinery.html#var/occupant_typecache">occupant_typecache</a></th><td>если задано, преобразуется в typecache при инициализации, иначе по умолчанию typecache mob/living</td></tr><tr><th><a href="obj/machinery.html#var/panel_open">panel_open</a></th><td>Открыта ли панель технического обслуживания машины.</td></tr><tr><th><a href="obj/machinery.html#var/payment_department">payment_department</a></th><td>Отдел, которому мы платим за использование этой машины</td></tr><tr><th><a href="obj/machinery.html#var/processing_flags">processing_flags</a></th><td>Допустимые флаги здесь: START_PROCESSING_ON_INIT или START_PROCESSING_MANUALLY. См. code__DEFINES\machines.dm для дополнительной информации об этих флагах.</td></tr><tr><th><a href="obj/machinery.html#var/state_open">state_open</a></th><td>Открыта машина или закрыта</td></tr><tr><th><a href="obj/machinery.html#var/static_power_usage">static_power_usage</a></th><td>текущее количество статического потребления энергии, которое эта машина забирает у своей зоны</td></tr><tr><th><a href="obj/machinery.html#var/subsystem_type">subsystem_type</a></th><td>Какую подсистему будет использовать эта машина, обычно SSmachines или SSfastprocess. По умолчанию все машины используют SSmachines. Это вызывает process() машины примерно каждые 2 секунды.</td></tr><tr><th><a href="obj/machinery.html#var/use_power">use_power</a></th><td>см. code/__DEFINES/machines.dm</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/machinery.html#proc/AI_notify_hack">AI_notify_hack</a></th><td>Оповещает ИИ о том, что происходит взлом.</td></tr><tr><th><a href="obj/machinery.html#proc/New">New</a></th><td>Нужно для машинного каркаса и flatpacker, т.е. именованный аргумент board</td></tr><tr><th><a href="obj/machinery.html#proc/add_as_sabotage_target">add_as_sabotage_target</a></th><td>Вызывается, если эта машина должна быть целью саботажа.</td></tr><tr><th><a href="obj/machinery.html#proc/available_energy">available_energy</a></th><td>Returns the available energy from the apc's cell and grid that can be used.
Args:</td></tr><tr><th><a href="obj/machinery.html#proc/begin_processing">begin_processing</a></th><td>Вспомогательная процедура для команды машине начать обработку</td></tr><tr><th><a href="obj/machinery.html#proc/charge_cell">charge_cell</a></th><td>Draws power from the apc's powernet and cell to charge a power cell.
Args:</td></tr><tr><th><a href="obj/machinery.html#proc/check_nap_violations">check_nap_violations</a></th><td>Проверяет нарушение НАП (принцип ненападения), анархо-капиталистического события, запускаемого админами,
где использование машин стоит денег</td></tr><tr><th><a href="obj/machinery.html#proc/clear_components">clear_components</a></th><td>Это должно быть вызвано перед массовым qdeling компонентов, чтобы освободить место для замены.
Если этого не сделать, всё пойдет наперекосяк, так как Exited() уничтожает машину, когда обнаруживает
выход даже одного компонента из атома.</td></tr><tr><th><a href="obj/machinery.html#proc/directly_use_energy">directly_use_energy</a></th><td>An alternative to 'use_power', this proc directly costs the APC in direct charge, as opposed to prioritising the grid.
Args:</td></tr><tr><th><a href="obj/machinery.html#proc/dump_contents">dump_contents</a></th><td>Выбрасывает каждый подвижный атом из списка содержимого машины, включая любые компоненты и плату.</td></tr><tr><th><a href="obj/machinery.html#proc/dump_inventory_contents">dump_inventory_contents</a></th><td>Выбрасывает каждый подвижный атом из списка содержимого машины, который не является component_part.</td></tr><tr><th><a href="obj/machinery.html#proc/end_processing">end_processing</a></th><td>Вспомогательная процедура для команды машине остановить обработку</td></tr><tr><th><a href="obj/machinery.html#proc/get_room_area">get_room_area</a></th><td>Получить действительную запитанную зону для ссылки на использование энергии, в основном для настенного оборудования, которое не всегда мапится непосредственно в запитанном месте.</td></tr><tr><th><a href="obj/machinery.html#proc/nap_violation">nap_violation</a></th><td>Действия, предпринимаемые в случае нарушения НАП
Аргументы</td></tr><tr><th><a href="obj/machinery.html#proc/on_deconstruction">on_deconstruction</a></th><td>вызывается при разборке перед окончательным удалением
Аргументы</td></tr><tr><th><a href="obj/machinery.html#proc/on_set_is_operational">on_set_is_operational</a></th><td>Вызывается, когда значение <code>is_operational</code> изменяется, чтобы мы могли отреагировать на это.</td></tr><tr><th><a href="obj/machinery.html#proc/on_set_machine_stat">on_set_machine_stat</a></th><td>Вызывается, когда значение <code>machine_stat</code> изменяется, чтобы мы могли отреагировать на это.</td></tr><tr><th><a href="obj/machinery.html#proc/on_set_panel_open">on_set_panel_open</a></th><td>Вызывается, когда значение <code>panel_open</code> изменяется, чтобы мы могли отреагировать на это.</td></tr><tr><th><a href="obj/machinery.html#proc/open_machine">open_machine</a></th><td>Открывает машину.</td></tr><tr><th><a href="obj/machinery.html#proc/post_machine_initialize">post_machine_initialize</a></th><td>Вызывается в LateInitialize и предназначено для замены его в машинах
Это настраивает питание для машины и требует вызова родителя,
обеспечивая работу питания на всех машинах, если они не исключены с помощью NO_POWER_USE.
Это процедура для переопределения, если вы хотите сделать что-то в LateInitialize.</td></tr><tr><th><a href="obj/machinery.html#proc/power_change">power_change</a></th><td>Called whenever the power settings of the containing area change</td></tr><tr><th><a href="obj/machinery.html#proc/process_atmos">process_atmos</a></th><td>Process, но для машин, взаимодействующих с атмосферой.
Как и process, всё, чувствительное к изменениям времени ожидания между тиками обработки, должно учитывать seconds_per_tick.</td></tr><tr><th><a href="obj/machinery.html#proc/process_early">process_early</a></th><td>Ранняя обработка для машин, добавленных в SSmachines.processing_early для приоритизации потребления энергии</td></tr><tr><th><a href="obj/machinery.html#proc/process_late">process_late</a></th><td>Поздняя обработка для машин, добавленных в SSmachines.processing_late для сбора точных записей</td></tr><tr><th><a href="obj/machinery.html#proc/remove_area_power_relationship">remove_area_power_relationship</a></th><td>процедура для вызова, когда машине перестает требоваться питание после периода потребности в нём
экономит память, удаляя связь питания с её зоной, если она существует, и теряет чувствительность к зоне
не влияет на само потребление энергии</td></tr><tr><th><a href="obj/machinery.html#proc/set_is_operational">set_is_operational</a></th><td>Вызывается, когда мы хотим изменить значение переменной <code>is_operational</code>. Булево.</td></tr><tr><th><a href="obj/machinery.html#proc/set_machine_stat">set_machine_stat</a></th><td>Вызывается, когда мы хотим изменить значение переменной machine_stat. Содержит битовые флаги.</td></tr><tr><th><a href="obj/machinery.html#proc/set_panel_open">set_panel_open</a></th><td>Вызывается, когда мы хотим изменить значение переменной <code>panel_open</code>. Булево.</td></tr><tr><th><a href="obj/machinery.html#proc/setup_area_power_relationship">setup_area_power_relationship</a></th><td>процедура для вызова, когда машине начинает требоваться питание после периода отсутствия потребности в нём
настраивает связи питания с её зоной, если она существует, и становится чувствительной к зоне
не влияет на само потребление энергии</td></tr><tr><th><a href="obj/machinery.html#proc/spawn_frame">spawn_frame</a></th><td>Создаёт каркас там, где находится эта машина. Если машина не была разобрана,
каркас создаётся повреждённым. Если каркас не может существовать на этом тайле, он разбивается
в металлические листы.</td></tr><tr><th><a href="obj/machinery.html#proc/toggle_panel_open">toggle_panel_open</a></th><td>Переключает переменную panel_open. Определено для удобства</td></tr><tr><th><a href="obj/machinery.html#proc/try_put_in_hand">try_put_in_hand</a></th><td>Кладёт переданный объект в руку пользователя</td></tr><tr><th><a href="obj/machinery.html#proc/unset_static_power">unset_static_power</a></th><td>внутренняя процедура, которая удаляет всё статическое потребление энергии из текущей зоны</td></tr><tr><th><a href="obj/machinery.html#proc/update_current_power_usage">update_current_power_usage</a></th><td>заставляет эту машину потреблять энергию из своей зоны в соответствии с тем, в какой режим use_power она установлена</td></tr><tr><th><a href="obj/machinery.html#proc/update_mode_power_usage">update_mode_power_usage</a></th><td>устанавливает power_usage, связанный с указанным use_power_mode, в new_usage
например, update_mode_power_usage(ACTIVE_POWER_USE, 10) устанавливает active_power_use = 10 и обновляет потребление энергии от зоны машины, если use_power == ACTIVE_POWER_USE</td></tr><tr><th><a href="obj/machinery.html#proc/update_power_channel">update_power_channel</a></th><td>обновляет канал питания, который использует эта машина. удаляет статическое потребление энергии из старого канала и добавляет его в новый канал</td></tr><tr><th><a href="obj/machinery.html#proc/update_use_power">update_use_power</a></th><td>обновляет переменную use_power для этой машины и обновляет её статическое потребление энергии от зоны, чтобы отразить новое значение</td></tr><tr><th><a href="obj/machinery.html#proc/use_energy">use_energy</a></th><td>Draws energy from the APC. Will use excess energy from the APC's connected grid,
then use energy from the APC's cell if there wasn't enough energy from the grid, unless ignore_apc is true.
Args:</td></tr><tr><th><a href="obj/machinery.html#proc/use_power_from_net">use_power_from_net</a></th><td>Attempts to draw power directly from the APC's Powernet rather than the APC's battery. For high-draw machines, like the cell charger</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/active_power_usage"><aside class="declaration">var </aside>active_power_usage <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L112"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 112"></a></h3><p>количество статической нагрузки, которое эта машина добавляет в список power_usage своей зоны, когда use_power = ACTIVE_POWER_USE</p><h3 id="var/always_area_sensitive"><aside class="declaration">var </aside>always_area_sensitive <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L151"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 151"></a></h3><p>Хотим ли мы перехватывать on_enter_area и on_exit_area?
Отключает некоторые оптимизации</p><h3 id="var/appearance_power_state"><aside class="declaration">var </aside>appearance_power_state <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L154"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 154"></a></h3><p>Каково было наше состояние питания в последний раз, когда мы обновляли внешний вид?
TRUE для включено, FALSE для выключено, -1 для &quot;никогда не проверялось&quot;</p><h3 id="var/atmos_processing"><aside class="declaration">var </aside>atmos_processing <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L144"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 144"></a></h3><p>Находится ли эта машина в очереди атмосферного оборудования?</p><h3 id="var/circuit"><aside class="declaration">var </aside>circuit <aside>– /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/circuitboard.html">circuitboard</a></aside> <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L136"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 136"></a></h3><p>Схема, которая будет создана и вставлена при создании оборудования</p><h3 id="var/component_parts"><aside class="declaration">var </aside>component_parts <aside>– /list</aside> <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L120"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 120"></a></h3><p>список всех частей, использованных для сборки, если сделано из определённых типов каркасов.</p><h3 id="var/critical_machine"><aside class="declaration">var </aside>critical_machine <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L126"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 126"></a></h3><p>Является ли эта машина критически важной для работы станции и должна ли зона быть освобождена от сбоев питания.</p><h3 id="var/fair_market_price"><aside class="declaration">var </aside>fair_market_price <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L142"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 142"></a></h3><p>Используется при нарушении НАП, оплата штрафа</p><h3 id="var/idle_power_usage"><aside class="declaration">var </aside>idle_power_usage <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L110"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 110"></a></h3><p>количество статической нагрузки, которое эта машина добавляет в список power_usage своей зоны, когда use_power = IDLE_POWER_USE</p><h3 id="var/interaction_flags_machine"><aside class="declaration">var </aside>interaction_flags_machine <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L138"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 138"></a></h3><p>См. code/DEFINES/interaction_flags.dm</p><h3 id="var/is_operational"><aside class="declaration">var </aside>is_operational <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L118"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 118"></a></h3><p>Комбинация факторов, таких как наличие питания, исправность и так далее. Булево значение.</p><h3 id="var/last_used_time"><aside class="declaration">var </aside>last_used_time <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L146"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 146"></a></h3><p>world.time последнего использования <a href="mob/living.html" title="/mob/living">/mob/living</a></p><h3 id="var/last_user_mobtype"><aside class="declaration">var </aside>last_user_mobtype <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L148"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 148"></a></h3><p>Тип моба последнего пользователя. Приведение типа к <a href="mob/living.html" title="/mob/living">/mob/living</a> для использования initial()</p><h3 id="var/machine_stat"><aside class="declaration">var </aside>machine_stat <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L106"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 106"></a></h3><p>см. code/__DEFINES/stat.dm</p><h3 id="var/occupant"><aside class="declaration">var </aside>occupant <aside>– /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a></aside> <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L130"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 130"></a></h3><p>Моб, запечатанный внутри машины</p><h3 id="var/occupant_typecache"><aside class="declaration">var </aside>occupant_typecache <aside>– /list</aside> <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L128"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 128"></a></h3><p>если задано, преобразуется в typecache при инициализации, иначе по умолчанию typecache mob/living</p><h3 id="var/panel_open"><aside class="declaration">var </aside>panel_open <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L122"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 122"></a></h3><p>Открыта ли панель технического обслуживания машины.</p><h3 id="var/payment_department"><aside class="declaration">var </aside>payment_department <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L140"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 140"></a></h3><p>Отдел, которому мы платим за использование этой машины</p><h3 id="var/processing_flags"><aside class="declaration">var </aside>processing_flags <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L132"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 132"></a></h3><p>Допустимые флаги здесь: START_PROCESSING_ON_INIT или START_PROCESSING_MANUALLY. См. code__DEFINES\machines.dm для дополнительной информации об этих флагах.</p><h3 id="var/state_open"><aside class="declaration">var </aside>state_open <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L124"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 124"></a></h3><p>Открыта машина или закрыта</p><h3 id="var/static_power_usage"><aside class="declaration">var </aside>static_power_usage <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L114"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 114"></a></h3><p>текущее количество статического потребления энергии, которое эта машина забирает у своей зоны</p><h3 id="var/subsystem_type"><aside class="declaration">var </aside>subsystem_type <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L134"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 134"></a></h3><p>Какую подсистему будет использовать эта машина, обычно SSmachines или SSfastprocess. По умолчанию все машины используют SSmachines. Это вызывает process() машины примерно каждые 2 секунды.</p><h3 id="var/use_power"><aside class="declaration">var </aside>use_power <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L108"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 108"></a></h3><p>см. code/__DEFINES/machines.dm</p><h2 id="proc">Proc Details</h2><h3 id="proc/AI_notify_hack"><aside class="declaration">proc </aside>AI_notify_hack<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L1277"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 1277"></a></aside></h3><p>Оповещает ИИ о том, что происходит взлом.</p>
<p>Отправляет всем ИИ сообщение о том, что происходит взлом. Специально используется для вмешательства космического ниндзя, так как эта процедура изначально была в файлах ниндзя.
Однако, процедура может использоваться и в других местах.</p><h3 id="proc/New"><aside class="parent"><a title="/atom" href="atom.html#proc/New">↑</a></aside>New<aside>(location, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/circuitboard.html">circuitboard</a>/board, ...)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L174"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 174"></a></aside></h3><p>Нужно для машинного каркаса и flatpacker, т.е. именованный аргумент board</p><h3 id="proc/add_as_sabotage_target"><aside class="declaration">proc </aside>add_as_sabotage_target<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L1288"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 1288"></a></aside></h3><p>Вызывается, если эта машина должна быть целью саботажа.</p><h3 id="proc/available_energy"><aside class="declaration">proc </aside>available_energy<aside>(consider_cell)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/modules/power/power.dm#L135"><img src="git.png" width="16" height="16" title="code/modules/power/power.dm 135"></a></aside></h3><p>Returns the available energy from the apc's cell and grid that can be used.
Args:</p>
<ul>
<li>consider_cell: Whether to count the energy from the APC's cell or not.
Returns: The available energy the machine can access from the APC.</li>
</ul><h3 id="proc/begin_processing"><aside class="declaration">proc </aside>begin_processing<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L301"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 301"></a></aside></h3><p>Вспомогательная процедура для команды машине начать обработку</p><h3 id="proc/charge_cell"><aside class="declaration">proc </aside>charge_cell<aside>(amount, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/stock_parts.html">stock_parts</a>/<a href="obj/item/stock_parts/power_store.html">power_store</a>/cell, grid_only, channel)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/modules/power/power.dm#L253"><img src="git.png" width="16" height="16" title="code/modules/power/power.dm 253"></a></aside></h3><p>Draws power from the apc's powernet and cell to charge a power cell.
Args:</p>
<ul>
<li>amount: The amount of energy given to the cell.</li>
<li>cell: The cell to charge.</li>
<li>grid_only: If true, only draw from the grid and ignore the APC's cell.</li>
<li>channel: The power channel to use.
Returns: The amount of energy the cell received.</li>
</ul><h3 id="proc/check_nap_violations"><aside class="declaration">proc </aside>check_nap_violations<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L706"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 706"></a></aside></h3><p>Проверяет нарушение НАП (принцип ненападения), анархо-капиталистического события, запускаемого админами,
где использование машин стоит денег</p><h3 id="proc/clear_components"><aside class="declaration">proc </aside>clear_components<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L1016"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 1016"></a></aside></h3><p>Это должно быть вызвано перед массовым qdeling компонентов, чтобы освободить место для замены.
Если этого не сделать, всё пойдет наперекосяк, так как Exited() уничтожает машину, когда обнаруживает
выход даже одного компонента из атома.</p><h3 id="proc/directly_use_energy"><aside class="declaration">proc </aside>directly_use_energy<aside>(amount, force)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/modules/power/power.dm#L196"><img src="git.png" width="16" height="16" title="code/modules/power/power.dm 196"></a></aside></h3><p>An alternative to 'use_power', this proc directly costs the APC in direct charge, as opposed to prioritising the grid.
Args:</p>
<ul>
<li>amount: How much energy the APC's cell is to be costed.</li>
<li>force: If true, consumes the remaining energy of the cell if there isn't enough energy to supply the demand.
Returns: The amount of energy that got used by the cell.</li>
</ul><h3 id="proc/dump_contents">dump_contents<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L387"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 387"></a></aside></h3><p>Выбрасывает каждый подвижный атом из списка содержимого машины, включая любые компоненты и плату.</p><h3 id="proc/dump_inventory_contents"><aside class="declaration">proc </aside>dump_inventory_contents<aside>(/list/subset)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L410"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 410"></a></aside></h3><p>Выбрасывает каждый подвижный атом из списка содержимого машины, который не является component_part.</p>
<p>Процедура не выбрасывает компоненты и пропускает всё, что находится в списке component_parts.
Вызовите dump_contents(), чтобы выбросить всё содержимое, включая компоненты.
Аргументы:</p>
<ul>
<li>subset - Если не null, только атомы, которые также содержатся в списке subset, будут выброшены.</li>
</ul><h3 id="proc/end_processing"><aside class="declaration">proc </aside>end_processing<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L306"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 306"></a></aside></h3><p>Вспомогательная процедура для команды машине остановить обработку</p><h3 id="proc/get_room_area"><aside class="declaration">proc </aside>get_room_area<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L568"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 568"></a></aside></h3><p>Получить действительную запитанную зону для ссылки на использование энергии, в основном для настенного оборудования, которое не всегда мапится непосредственно в запитанном месте.</p><h3 id="proc/nap_violation"><aside class="declaration">proc </aside>nap_violation<aside>(/<a href="mob.html">mob</a>/violator)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L740"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 740"></a></aside></h3><p>Действия, предпринимаемые в случае нарушения НАП
Аргументы</p>
<ul>
<li>mob/violator - моб, нарушивший соглашение НАП</li>
</ul><h3 id="proc/on_deconstruction"><aside class="declaration">proc </aside>on_deconstruction<aside>(disassembled)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L1233"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 1233"></a></aside></h3><p>вызывается при разборке перед окончательным удалением
Аргументы</p>
<ul>
<li>disassembled - если TRUE, значит мы использовали инструменты для разборки, FALSE означает, что оно было уничтожено другими способами</li>
</ul><h3 id="proc/on_set_is_operational"><aside class="declaration">proc </aside>on_set_is_operational<aside>(old_value)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L621"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 621"></a></aside></h3><p>Вызывается, когда значение <code>is_operational</code> изменяется, чтобы мы могли отреагировать на это.</p><h3 id="proc/on_set_machine_stat"><aside class="declaration">proc </aside>on_set_machine_stat<aside>(old_value)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L343"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 343"></a></aside></h3><p>Вызывается, когда значение <code>machine_stat</code> изменяется, чтобы мы могли отреагировать на это.</p><h3 id="proc/on_set_panel_open"><aside class="declaration">proc </aside>on_set_panel_open<aside>(old_value)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L637"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 637"></a></aside></h3><p>Вызывается, когда значение <code>panel_open</code> изменяется, чтобы мы могли отреагировать на это.</p><h3 id="proc/open_machine"><aside class="declaration">proc </aside>open_machine<aside>(drop, density_to_set)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L377"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 377"></a></aside></h3><p>Открывает машину.</p>
<p>Обновит иконку машины и все открытые в данный момент пользовательские интерфейсы.
Аргументы:</p>
<ul>
<li>drop - Булево. Выбрасывать ли любые хранящиеся предметы в машине. Не включает компоненты.</li>
<li>density - Булево. Делать ли объект плотным, когда он открыт.</li>
</ul><h3 id="proc/post_machine_initialize"><aside class="declaration">proc </aside>post_machine_initialize<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L217"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 217"></a></aside></h3><p>Вызывается в LateInitialize и предназначено для замены его в машинах
Это настраивает питание для машины и требует вызова родителя,
обеспечивая работу питания на всех машинах, если они не исключены с помощью NO_POWER_USE.
Это процедура для переопределения, если вы хотите сделать что-то в LateInitialize.</p><h3 id="proc/power_change"><aside class="declaration">proc </aside>power_change<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/modules/power/power.dm#L273"><img src="git.png" width="16" height="16" title="code/modules/power/power.dm 273"></a></aside></h3><p>Called whenever the power settings of the containing area change</p>
<p>by default, check equipment channel &amp; set flag, can override if needed</p>
<p>Returns TRUE if the NOPOWER flag was toggled</p><h3 id="proc/process_atmos"><aside class="declaration">proc </aside>process_atmos<aside>(seconds_per_tick)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L327"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 327"></a></aside></h3><p>Process, но для машин, взаимодействующих с атмосферой.
Как и process, всё, чувствительное к изменениям времени ожидания между тиками обработки, должно учитывать seconds_per_tick.</p><h3 id="proc/process_early"><aside class="declaration">proc </aside>process_early<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L311"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 311"></a></aside></h3><p>Ранняя обработка для машин, добавленных в SSmachines.processing_early для приоритизации потребления энергии</p><h3 id="proc/process_late"><aside class="declaration">proc </aside>process_late<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L319"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 319"></a></aside></h3><p>Поздняя обработка для машин, добавленных в SSmachines.processing_late для сбора точных записей</p><h3 id="proc/remove_area_power_relationship"><aside class="declaration">proc </aside>remove_area_power_relationship<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L265"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 265"></a></aside></h3><p>процедура для вызова, когда машине перестает требоваться питание после периода потребности в нём
экономит память, удаляя связь питания с её зоной, если она существует, и теряет чувствительность к зоне
не влияет на само потребление энергии</p><h3 id="proc/set_is_operational"><aside class="declaration">proc </aside>set_is_operational<aside>(new_value)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L610"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 610"></a></aside></h3><p>Вызывается, когда мы хотим изменить значение переменной <code>is_operational</code>. Булево.</p><h3 id="proc/set_machine_stat"><aside class="declaration">proc </aside>set_machine_stat<aside>(new_value)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L332"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 332"></a></aside></h3><p>Вызывается, когда мы хотим изменить значение переменной machine_stat. Содержит битовые флаги.</p><h3 id="proc/set_panel_open"><aside class="declaration">proc </aside>set_panel_open<aside>(new_value)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L627"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 627"></a></aside></h3><p>Вызывается, когда мы хотим изменить значение переменной <code>panel_open</code>. Булево.</p><h3 id="proc/setup_area_power_relationship"><aside class="declaration">proc </aside>setup_area_power_relationship<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L247"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 247"></a></aside></h3><p>процедура для вызова, когда машине начинает требоваться питание после периода отсутствия потребности в нём
настраивает связи питания с её зоной, если она существует, и становится чувствительной к зоне
не влияет на само потребление энергии</p>
<p>Возвращает TRUE, если это вызвало полную регистрацию, иначе FALSE
Мы делаем это, чтобы оборудование, которое хочет обойти оптимизацию чувствительности к зоне, могло это сделать</p><h3 id="proc/spawn_frame"><aside class="declaration">proc </aside>spawn_frame<aside>(disassembled)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L956"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 956"></a></aside></h3><p>Создаёт каркас там, где находится эта машина. Если машина не была разобрана,
каркас создаётся повреждённым. Если каркас не может существовать на этом тайле, он разбивается
в металлические листы.</p>
<p>Аргументы:</p>
<ul>
<li>disassembled - Если FALSE, машина была уничтожена, а не разобрана, и каркас создаётся с уменьшенной прочностью.</li>
</ul><h3 id="proc/toggle_panel_open"><aside class="declaration">proc </aside>toggle_panel_open<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L643"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 643"></a></aside></h3><p>Переключает переменную panel_open. Определено для удобства</p><h3 id="proc/try_put_in_hand"><aside class="declaration">proc </aside>try_put_in_hand<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/object, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L438"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 438"></a></aside></h3><p>Кладёт переданный объект в руку пользователя</p>
<p>Кладёт переданный объект в руку пользователя, если они находятся рядом.
Если пользователь не рядом, помещает объект наверх машины.</p>
<p>Переменные:</p>
<ul>
<li>object (obj) Объект, который нужно поместить в руку пользователя.</li>
<li>user (mob/living) Пользователь для получения объекта</li>
</ul><h3 id="proc/unset_static_power"><aside class="declaration">proc </aside>unset_static_power<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L522"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 522"></a></aside></h3><p>внутренняя процедура, которая удаляет всё статическое потребление энергии из текущей зоны</p><h3 id="proc/update_current_power_usage"><aside class="declaration">proc </aside>update_current_power_usage<aside>()  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L588"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 588"></a></aside></h3><p>заставляет эту машину потреблять энергию из своей зоны в соответствии с тем, в какой режим use_power она установлена</p><h3 id="proc/update_mode_power_usage"><aside class="declaration">proc </aside>update_mode_power_usage<aside>(use_power_mode, new_usage)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L543"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 543"></a></aside></h3><p>устанавливает power_usage, связанный с указанным use_power_mode, в new_usage
например, update_mode_power_usage(ACTIVE_POWER_USE, 10) устанавливает active_power_use = 10 и обновляет потребление энергии от зоны машины, если use_power == ACTIVE_POWER_USE</p>
<p>Аргументы:</p>
<ul>
<li>use_power_mode - режим питания use_power для изменения. если IDLE_POWER_USE, меняет idle_power_usage, ACTIVE_POWER_USE меняет active_power_usage</li>
<li>new_usage - новое значение для установки переменной указанного режима питания</li>
</ul><h3 id="proc/update_power_channel"><aside class="declaration">proc </aside>update_power_channel<aside>(new_power_channel)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L505"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 505"></a></aside></h3><p>обновляет канал питания, который использует эта машина. удаляет статическое потребление энергии из старого канала и добавляет его в новый канал</p><h3 id="proc/update_use_power"><aside class="declaration">proc </aside>update_use_power<aside>(new_use_power)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/game/machinery/_machinery.dm#L475"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 475"></a></aside></h3><p>обновляет переменную use_power для этой машины и обновляет её статическое потребление энергии от зоны, чтобы отразить новое значение</p><h3 id="proc/use_energy"><aside class="declaration">proc </aside>use_energy<aside>(amount, channel, ignore_apc, force)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/modules/power/power.dm#L159"><img src="git.png" width="16" height="16" title="code/modules/power/power.dm 159"></a></aside></h3><p>Draws energy from the APC. Will use excess energy from the APC's connected grid,
then use energy from the APC's cell if there wasn't enough energy from the grid, unless ignore_apc is true.
Args:</p>
<ul>
<li>amount: The amount of energy to use.</li>
<li>channel: The power channel to use.</li>
<li>ignore_apc: If true, do not consider the APC's cell when demanding energy.</li>
<li>force: If true and if there isn't enough energy, consume the remaining energy. Returns 0 if false and there isn't enough energy.
Returns: The amount of energy used.</li>
</ul><h3 id="proc/use_power_from_net"><aside class="declaration">proc </aside>use_power_from_net<aside>(amount, take_any)  <a href="https://github.com/Reworkin/Andromeda-byond/blob/3b0c78e04fd36f9475eab5e700d67a897576bca3/code/modules/power/power.dm#L220"><img src="git.png" width="16" height="16" title="code/modules/power/power.dm 220"></a></aside></h3><p>Attempts to draw power directly from the APC's Powernet rather than the APC's battery. For high-draw machines, like the cell charger</p>
<p>Checks the surplus power on the APC's powernet, and compares to the requested amount. If the requested amount is available, this proc
will add the amount to the APC's usage and return that amount. Otherwise, this proc will return FALSE.
If the take_any var arg is set to true, this proc will use and return any surplus that is under the requested amount, assuming that
the surplus is above zero.
Args:</p>
<ul>
<li>amount, the amount of power requested from the powernet. In joules.</li>
<li>take_any, a bool of whether any amount of power is acceptable, instead of all or nothing. Defaults to FALSE</li>
</ul></main><footer>tgstation.dme <a href="https://github.com/Reworkin/Andromeda-byond/tree/3b0c78e04fd36f9475eab5e700d67a897576bca3">3b0c78e</a> (main) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>